{"remainingRequest":"/Users/hngskj/Projects/webapp/labnote/node_modules/babel-loader/lib/index.js!/Users/hngskj/Projects/webapp/labnote/node_modules/eslint-loader/index.js??ref--13-0!/Users/hngskj/Projects/webapp/labnote/src/pipeline/components/AddComponent.js","dependencies":[{"path":"/Users/hngskj/Projects/webapp/labnote/src/pipeline/components/AddComponent.js","mtime":1581418259550},{"path":"/Users/hngskj/Projects/webapp/labnote/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hngskj/Projects/webapp/labnote/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hngskj/Projects/webapp/labnote/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiL1VzZXJzL2huZ3Nrai9Qcm9qZWN0cy93ZWJhcHAvbGFibm90ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIi9Vc2Vycy9obmdza2ovUHJvamVjdHMvd2ViYXBwL2xhYm5vdGUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIGZyb20gIi9Vc2Vycy9obmdza2ovUHJvamVjdHMvd2ViYXBwL2xhYm5vdGUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iOwppbXBvcnQgX2dldFByb3RvdHlwZU9mIGZyb20gIi9Vc2Vycy9obmdza2ovUHJvamVjdHMvd2ViYXBwL2xhYm5vdGUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2dldFByb3RvdHlwZU9mIjsKaW1wb3J0IF9pbmhlcml0cyBmcm9tICIvVXNlcnMvaG5nc2tqL1Byb2plY3RzL3dlYmFwcC9sYWJub3RlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9pbmhlcml0cyI7CmltcG9ydCBSZXRlIGZyb20gInJldGUiOwppbXBvcnQgQ29sb3IgZnJvbSAiY29sb3IiOwppbXBvcnQgKiBhcyBTb2NrZXQgZnJvbSAiQC9waXBlbGluZS9zb2NrZXRzIjsKaW1wb3J0IHsgVGV4dENvbnRyb2wgfSBmcm9tICJAL3BpcGVsaW5lL2NvbnRyb2xzL1RleHRDb250cm9sLmpzIjsKZXhwb3J0IHZhciBBZGRDb21wb25lbnQgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uIChfUmV0ZSRDb21wb25lbnQpIHsKICBfaW5oZXJpdHMoQWRkQ29tcG9uZW50LCBfUmV0ZSRDb21wb25lbnQpOwoKICBmdW5jdGlvbiBBZGRDb21wb25lbnQoKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQWRkQ29tcG9uZW50KTsKCiAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX2dldFByb3RvdHlwZU9mKEFkZENvbXBvbmVudCkuY2FsbCh0aGlzLCAiTWl4IikpOwogIH0KCiAgX2NyZWF0ZUNsYXNzKEFkZENvbXBvbmVudCwgW3sKICAgIGtleTogImJ1aWxkZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGJ1aWxkZXIobm9kZSkgewogICAgICB2YXIgaW5wMSA9IG5ldyBSZXRlLklucHV0KCJhIiwgIlZhbHVlIiwgU29ja2V0LnZhbHVlKTsKICAgICAgdmFyIGlucDIgPSBuZXcgUmV0ZS5JbnB1dCgiYiIsICJWYWx1ZSIsIFNvY2tldC52YWx1ZSk7CiAgICAgIHZhciBvdXQgPSBuZXcgUmV0ZS5PdXRwdXQoInJlc3VsdCIsICJWYWx1ZSIsIFNvY2tldC52YWx1ZSk7CiAgICAgIGlucDEuYWRkQ29udHJvbChuZXcgVGV4dENvbnRyb2wodGhpcy5lZGl0b3IsICJhIikpOwogICAgICBpbnAyLmFkZENvbnRyb2wobmV3IFRleHRDb250cm9sKHRoaXMuZWRpdG9yLCAiYiIpKTsKICAgICAgcmV0dXJuIG5vZGUuYWRkSW5wdXQoaW5wMSkuYWRkSW5wdXQoaW5wMikuYWRkQ29udHJvbChuZXcgVGV4dENvbnRyb2wodGhpcy5lZGl0b3IsICJwcmV2aWV3IiwgdHJ1ZSkpLmFkZE91dHB1dChvdXQpOwogICAgfQogIH0sIHsKICAgIGtleTogIndvcmtlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gd29ya2VyKG5vZGUsIGlucHV0cywgb3V0cHV0cykgewogICAgICB2YXIgbjEgPSBpbnB1dHNbImEiXS5sZW5ndGggPyBpbnB1dHNbImEiXVswXSA6IG5vZGUuZGF0YS5hOwogICAgICB2YXIgbjIgPSBpbnB1dHNbImIiXS5sZW5ndGggPyBpbnB1dHNbImIiXVswXSA6IG5vZGUuZGF0YS5iOwogICAgICB2YXIgc3VtID0gQ29sb3IobjEpLm1peChDb2xvcihuMikpOwogICAgICB0aGlzLmVkaXRvci5ub2Rlcy5maW5kKGZ1bmN0aW9uIChuKSB7CiAgICAgICAgcmV0dXJuIG4uaWQgPT0gbm9kZS5pZDsKICAgICAgfSkuY29udHJvbHMuZ2V0KCJwcmV2aWV3Iikuc2V0VmFsdWUoc3VtKTsKICAgICAgb3V0cHV0c1sicmVzdWx0Il0gPSBzdW07CiAgICB9CiAgfV0pOwoKICByZXR1cm4gQWRkQ29tcG9uZW50Owp9KFJldGUuQ29tcG9uZW50KTs="},{"version":3,"sources":["/Users/hngskj/Projects/webapp/labnote/src/pipeline/components/AddComponent.js"],"names":["Rete","Color","Socket","TextControl","AddComponent","node","inp1","Input","value","inp2","out","Output","addControl","editor","addInput","addOutput","inputs","outputs","n1","length","data","a","n2","b","sum","mix","nodes","find","n","id","controls","get","setValue","Component"],"mappings":";;;;;;AAAA,OAAOA,IAAP,MAAiB,MAAjB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAO,KAAKC,MAAZ,MAAwB,oBAAxB;AACA,SAASC,WAAT,QAA4B,oCAA5B;AAEA,WAAaC,YAAb;AAAA;AAAA;AAAA;;AACE,0BAAc;AAAA;;AAAA,qFACN,KADM;AAEb;;AAHH;AAAA;AAAA,4BAKUC,IALV,EAKgB;AACZ,UAAIC,IAAI,GAAG,IAAIN,IAAI,CAACO,KAAT,CAAe,GAAf,EAAoB,OAApB,EAA6BL,MAAM,CAACM,KAApC,CAAX;AACA,UAAIC,IAAI,GAAG,IAAIT,IAAI,CAACO,KAAT,CAAe,GAAf,EAAoB,OAApB,EAA6BL,MAAM,CAACM,KAApC,CAAX;AACA,UAAIE,GAAG,GAAG,IAAIV,IAAI,CAACW,MAAT,CAAgB,QAAhB,EAA0B,OAA1B,EAAmCT,MAAM,CAACM,KAA1C,CAAV;AAEAF,MAAAA,IAAI,CAACM,UAAL,CAAgB,IAAIT,WAAJ,CAAgB,KAAKU,MAArB,EAA6B,GAA7B,CAAhB;AACAJ,MAAAA,IAAI,CAACG,UAAL,CAAgB,IAAIT,WAAJ,CAAgB,KAAKU,MAArB,EAA6B,GAA7B,CAAhB;AAEA,aAAOR,IAAI,CACRS,QADI,CACKR,IADL,EAEJQ,QAFI,CAEKL,IAFL,EAGJG,UAHI,CAGO,IAAIT,WAAJ,CAAgB,KAAKU,MAArB,EAA6B,SAA7B,EAAwC,IAAxC,CAHP,EAIJE,SAJI,CAIML,GAJN,CAAP;AAKD;AAlBH;AAAA;AAAA,2BAoBSL,IApBT,EAoBeW,MApBf,EAoBuBC,OApBvB,EAoBgC;AAC5B,UAAIC,EAAE,GAAGF,MAAM,CAAC,GAAD,CAAN,CAAYG,MAAZ,GAAqBH,MAAM,CAAC,GAAD,CAAN,CAAY,CAAZ,CAArB,GAAsCX,IAAI,CAACe,IAAL,CAAUC,CAAzD;AACA,UAAIC,EAAE,GAAGN,MAAM,CAAC,GAAD,CAAN,CAAYG,MAAZ,GAAqBH,MAAM,CAAC,GAAD,CAAN,CAAY,CAAZ,CAArB,GAAsCX,IAAI,CAACe,IAAL,CAAUG,CAAzD;AAEA,UAAIC,GAAG,GAAGvB,KAAK,CAACiB,EAAD,CAAL,CAAUO,GAAV,CAAcxB,KAAK,CAACqB,EAAD,CAAnB,CAAV;AAEA,WAAKT,MAAL,CAAYa,KAAZ,CACGC,IADH,CACQ,UAAAC,CAAC;AAAA,eAAIA,CAAC,CAACC,EAAF,IAAQxB,IAAI,CAACwB,EAAjB;AAAA,OADT,EAEGC,QAFH,CAEYC,GAFZ,CAEgB,SAFhB,EAGGC,QAHH,CAGYR,GAHZ;AAIAP,MAAAA,OAAO,CAAC,QAAD,CAAP,GAAoBO,GAApB;AACD;AA/BH;;AAAA;AAAA,EAAkCxB,IAAI,CAACiC,SAAvC","sourcesContent":["import Rete from \"rete\"\nimport Color from \"color\"\nimport * as Socket from \"@/pipeline/sockets\"\nimport { TextControl } from \"@/pipeline/controls/TextControl.js\"\n\nexport class AddComponent extends Rete.Component {\n  constructor() {\n    super(\"Mix\")\n  }\n\n  builder(node) {\n    var inp1 = new Rete.Input(\"a\", \"Value\", Socket.value)\n    var inp2 = new Rete.Input(\"b\", \"Value\", Socket.value)\n    var out = new Rete.Output(\"result\", \"Value\", Socket.value)\n\n    inp1.addControl(new TextControl(this.editor, \"a\"))\n    inp2.addControl(new TextControl(this.editor, \"b\"))\n\n    return node\n      .addInput(inp1)\n      .addInput(inp2)\n      .addControl(new TextControl(this.editor, \"preview\", true))\n      .addOutput(out)\n  }\n\n  worker(node, inputs, outputs) {\n    var n1 = inputs[\"a\"].length ? inputs[\"a\"][0] : node.data.a\n    var n2 = inputs[\"b\"].length ? inputs[\"b\"][0] : node.data.b\n\n    var sum = Color(n1).mix(Color(n2))\n\n    this.editor.nodes\n      .find(n => n.id == node.id)\n      .controls.get(\"preview\")\n      .setValue(sum)\n    outputs[\"result\"] = sum\n  }\n}\n"]}]}